<!DOCTYPE html><html lang="ru"><head>
    <meta charset="UTF-8">
    <title>Bunker - by lvyzap</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-auth-compat.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
        body { background: #000 url('https://shared.akamai.steamstatic.com/store_item_assets/steam/apps/481110/ss_f6759e27cb0d2d3770b3554ead377589ae910b4e.1920x1080.jpg') center/cover fixed; color: #fff; font-family: 'Inter', sans-serif; overflow-x: hidden; }
        :root { --frost: #e0f7fa; }
        .overlay { background: rgba(0, 0, 0, 0.45); min-height: 100vh; padding: 25px; transition: 0.5s; }
        .game-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(380px, 1fr)); gap: 30px; max-width: 1950px; margin: 0 auto; }
        .p-card { background: rgba(255, 255, 255, 0.07); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 24px; padding: 24px; position: relative; transition: 0.6s cubic-bezier(0.4, 0, 0.2, 1); display: flex; flex-direction: column; min-height: 850px; backdrop-filter: blur(25px); }
        .is-exiled-card { opacity: 0.3; filter: grayscale(1) brightness(0.5); transform: scale(0.95); }
        .stat-box { padding: 10px; border-radius: 12px; transition: 0.3s; border: 1px solid transparent; }
        .stat-revealed { 
            background: rgba(255, 255, 255, 0.15) !important; 
            border: 2px solid rgba(255, 255, 255, 0.8) !important; 
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.2), inset 0 0 10px rgba(255, 255, 255, 0.1);
            transform: scale(1.02);}        
        .focus-mode .game-grid { display: flex; justify-content: center; align-items: center; min-height: 70vh; }
        .focus-mode .p-card:not(.speaking-card) { display: none !important; }
        .speaking-card { transform: scale(1.15) !important; z-index: 1000 !important; border: 4px solid white !important; box-shadow: 0 0 150px rgba(255, 255, 255, 0.3) !important; background: rgba(255, 255, 255, 0.15) !important; opacity: 1 !important; filter: none !important; }
        .target-out { border: 4px solid #ff3e3e !important; animation: heart-pulse 2s infinite ease-in-out; }
        .stat-label { font-size: 9px; color: var(--frost); font-weight: 900; text-transform: uppercase; opacity: 0.8; letter-spacing: 1.5px; margin-bottom: 4px; display: block; }
        .blur-val { filter: blur(18px); color: transparent !important; user-select: none; }
        .v-slot { width: 38px; height: 38px; display: flex; align-items: center; justify-content: center; font-weight: 900; font-size: 13px; cursor: pointer; background: rgba(255,255,255,0.1); border-radius: 10px; color: #555; border: 1px solid #444; transition: 0.2s; }
        .v-slot.active { color: #fff; box-shadow: 0 0 25px white; border-color: white; background: rgba(255,255,255,0.3); }
        .glass-overlay { position: fixed; inset: 0; z-index: 9999; background: rgba(0,0,0,0.85); display: flex; align-items: center; justify-content: center; backdrop-filter: blur(45px); }
        .glass-box { background: rgba(255, 255, 255, 0.05); border: 2px solid rgba(255,255,255,0.3); border-radius: 50px; text-align: center; max-width: 600px; width: 90%; padding: 60px; box-shadow: 0 0 100px rgba(0,0,0,0.5); }
        .bunker-info-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 25px; max-width: 1900px; margin: 0 auto 50px auto; }
        .info-block { background: rgba(255, 255, 255, 0.07); border-left: 8px solid white; padding: 25px; border-radius: 20px; backdrop-filter: blur(20px); }
        .info-block textarea { height: 180px; font-size: 19px; line-height: 1.4; border: none !important; background: transparent !important; color: white; width: 100%; resize: none; font-weight: 700; outline: none; }
        .event-overlay { position: fixed; inset: 0; z-index: 8000; background: rgba(0,0,0,0.6); display: flex; align-items: center; justify-content: center; backdrop-filter: blur(35px); }
        .event-box { background: rgba(255, 255, 255, 0.05); border: 2px solid white; border-radius: 50px; padding: 60px; text-align: center; max-width: 900px; }
        .stamp-exile { position: absolute; inset: 0; z-index: 500; display: flex; align-items: center; justify-content: center; pointer-events: none; }
        .stamp-text { color: #ff3e3e; font-size: 60px; font-weight: 900; border: 10px solid #ff3e3e; padding: 10px 40px; transform: rotate(-15deg); text-transform: uppercase; background: rgba(0,0,0,0.6); border-radius: 20px; }
        @keyframes heart-pulse { 0% { transform: scale(1); } 50% { transform: scale(1.02); } 100% { transform: scale(1); } }
        input, .stat-input { background: transparent !important; border: none !important; color: #fff; width: 100%; border-bottom: 1px solid rgba(255,255,255,0.1) !important; font-weight: 800; outline: none; }
        .p-input { background: rgba(255,255,255,0.05) !important; border: 2px solid rgba(255,255,255,0.2) !important; border-radius: 15px; padding: 15px; font-size: 30px; text-align: center; margin-bottom: 20px; color: white; width: 100%; }
        .glass-overlay {animation: fadeIn 0.4s ease-out;}
        .event-overlay, .glass-overlay {animation: slideUpFade 0.5s cubic-bezier(0.23, 1, 0.32, 1); /* */}
        .event-box, .glass-box {animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); /* */}
        .glass-box {animation: scaleUp 0.3s cubic-bezier(0.34, 1.56, 0.64, 1); /* */}
        @keyframes fadeIn {from { opacity: 0; backdrop-filter: blur(0px); } to { opacity: 1; backdrop-filter: blur(35px); }}
        @keyframes scaleUp {from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; }}
        @keyframes slideUpFade {from { opacity: 0; backdrop-filter: blur(0px); }to { opacity: 1; backdrop-filter: blur(45px); }}
        @keyframes popIn {from { transform: scale(0.9); opacity: 0; }to { transform: scale(1); opacity: 1; }}
        @keyframes dice-spin {
            0% { transform: rotate(0deg) scale(1); }
            30% { transform: rotate(180deg) scale(1.2); }
            100% { transform: rotate(360deg) scale(1); }}
        .dice-rolling { animation: dice-spin 0.5s ease-out; }
    </style></head><body>
    <div id="root"></div>
    <script type="text/babel">
        const firebaseConfig = { apiKey: "AIzaSyDFISlde1kEbpqaTdsIgHxAPL_5phSB5Pw", authDomain: "bunkergamedaneq.firebaseapp.com", databaseURL: "https://bunkergamedaneq-default-rtdb.europe-west1.firebasedatabase.app", projectId: "bunkergamedaneq", storageBucket: "bunkergamedaneq.firebasestorage.app", messagingSenderId: "388224175237", appId: "1:388224175237:web:933fbbbecbdfee2c61adec" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();
        const auth = firebase.auth();
        const sfx = {
        open: new Audio('з'),
        click: new Audio('https://assets.mixkit.co/active_storage/sfx/2571/2571-preview.mp3'),
        stop: new Audio('https://assets.mixkit.co/active_storage/sfx/2568/2568-preview.mp3'),
        tick: new Audio('https://assets.mixkit.co/active_storage/sfx/2568/2568-preview.mp3'),
        raid: new Audio('https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3'),
        survivor: new Audio('https://assets.mixkit.co/active_storage/sfx/600/600-preview.mp3'),
        event: new Audio('https://assets.mixkit.co/active_storage/sfx/951/951-preview.mp3')
        };
    

        const playSfx = (sound) => {
            sound.currentTime = 0;
            sound.play().catch(e => console.log("Браузер ждет клика по сайту..."));
        };

        const play = (sound) => { 
            sound.currentTime = 0; 
            sound.play(); 
        };

         const bgMusic = {
            tracks: [
                new Audio('https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3'),
                new Audio('https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3'),
                new Audio('https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3')
            ],
            currentTrack: 0,
            isPlaying: false
        };

        bgMusic.tracks.forEach(track => {
            track.volume = 0.3;
            track.loop = false;
            track.addEventListener('ended', () => {
                bgMusic.currentTrack = (bgMusic.currentTrack + 1) % bgMusic.tracks.length;
                bgMusic.tracks[bgMusic.currentTrack].currentTime = 0;
                bgMusic.tracks[bgMusic.currentTrack].play();
            });
        });

        const playBgMusic = () => {
            if (!bgMusic.isPlaying) {
                bgMusic.isPlaying = true;
                bgMusic.tracks[bgMusic.currentTrack].play().catch(e => console.log("Background music error:", e));
            }
        };
        
        document.addEventListener('click', () => { bgMusic.tracks.forEach(track => track.volume = 0.02); playBgMusic(); });
        const pauseBgMusic = () => { bgMusic.tracks.forEach(track => track.pause()); bgMusic.isPlaying = false; };
        
        const playRevealSound = () => playSfx(sfx.open);
        const stopAudio = () => {
            bgMusic.tracks.forEach(track => {
                track.pause();
                track.currentTime = 0;
            });
            bgMusic.isPlaying = false;
        };
        
        const MY_ACTION_CARDS = [
        "МЕДИК: Здоровье -> Идеал.", "ГЕНЕТИК: Репродукция -> ПЛОДОВИТ.", "ОБМЕН: Багаж соседа.", "БЛОКИРОВКА: Молчание круг.", "ШПИОН: Смотри козыри.",
        "МАРОДЕР: Забери лучший предмет у изгнанного.", "КАННИБАЛ: Съешь соседа, восстанови здоровье.", "ПОДСТАВА: Подбрось свой плохой факт другому.", "СУЦИДНИК: Если изгоняют тебя, забираешь любого с собой.", "ТЕРРОРИСТ: Взорви багаж троих игроков.",
        "ВУАЙЕРИСТ: Весь круг смотришь чужие карты действий.", "Эвтаназия: Убей игрока с критическим здоровьем.", "СЕКС-СИМВОЛ: Иммунитет к голосованию на 1 круг.", "ДОНОСЧИК: Вскрой самый грязный факт игрока.", "ВОР-РЕЦИДИВИСТ: Укради по 1 предмету у двоих.",
        "БЕСПЛОДИЕ: Сделай игрока бесплодным навсегда.", "РАДИАЦИЯ: Игрок получает 'Лучевую болезнь'.", "ПСИХУШКА: Замени хобби игрока на фобию.", "ЛОБОТОМИЯ: Игрок теряет профессию (теперь Овощ).", "АЛКАШ: Игрок обязан говорить только тостами весь круг.",
        "СЫВОРОТКА ПРАВДЫ: Игрок обязан честно ответить на 3 вопроса.", "ИУДА: Поменяй свой плохой багаж на карту действия соседа.", "ОГНЕСТРЕЛ: Нанеси травму игроку (Здоровье падает).", "КРОВНАЯ МЕСТЬ: Твой голос против обидчика считается за три.", "ПАЛАЧ: Твой голос решающий, даже если нет ничьей.",
        "СВАХА: Свяжи двух игроков (уходят только вместе).", "ПЕРЕДОЗ: Игрок пропускает 2 хода из-за 'глюков'.", "АМПУТАЦИЯ: Вылечи болезнь, но отними багаж (типа плата).", "ЗОМБИ: Изгнанный игрок возвращается и голосует 1 раз.", "ИНФЕКЦИЯ: Зарази соседа своей болезнью.",
        "СТРАХОВКА: Если тебя изгонят, ты выбираешь, кто займет твое место.", "ГНИДА: Отмени действие любой лечащей карты.", "БАРТЕР: Отдай болезнь, забери багаж.", "ЗАГРАДОТРЯД: Запрети выходить из бункера самому здоровому.", "РЕВИЗОР: Все открывают багаж, ты забираешь что хочешь.",
        "ШЛЮХА: Переспи с игроком, чтобы он голосовал за тебя.", "ОСЛЕПЛЕНИЕ: Игрок не видит свои карты до конца круга.", "ТРУПНЫЙ ЯД: Испорти всю еду в багаже у соседа.", "ФАНАТИК: Заставь игрока выбросить весь багаж ради спасения души.", "КРЫСИНЫЙ КОРОЛЬ: Сбрось 3 карты действия из колоды.",
        "ЗОЛОТАЯ ЛИХОРАДКА: Забери всё золото и драгоценности у игроков.", "ПЕРЕХВАТ: Забери карту действия, которую только что разыграли.", "ВЕТО: Запрети игроку использовать его профессию при аргументации.", "ИЗОЛЯТОР: Закрой игрока, он не участвует в обсуждении.", "ПАНИЧЕСКАЯ АТАКА: Игрок вскрывает свою фобию и молчит.",
        "ПЕРЕСАДКА: Забери здоровье у молодого, отдай старому.", "ГРЯЗНОЕ БЕЛЬЕ: Все узнают хобби игрока.", "НАРКОЗ: Выключи игрока на время голосования.", "ОГРАБЛЕНИЕ: Забери у игрока всё, оставь 1 предмет.", "НЕКРОФИЛ: Получи бонус за каждого изгнанного персонажа.",
        "ПРОФНЕПРИГОДНОСТЬ: Замени профессию соседа на 'Безработный'.", "КАРЦЕР: Лиши игрока права голоса и багажа на ход.", "МАНИПУЛЯТОР: Поменяй цели местами при голосовании.", "ЧЕРНЫЙ РЫНОК: Обменяй свой предмет на 2 карты из колоды.", "КРЫША: Заставь другого игрока защищать тебя в своей речи.",
        "ПОДКУП: Дай игроку предмет, чтобы он сменил голос.", "УДАЧА ДУРАКА: Твой плохой факт становится хорошим.", "ПЛАГИАТ: Скопируй профессию соседа себе.", "ОБНУЛЕНИЕ: У всех игроков пропадает весь багаж.", "ПОСЛЕДНИЙ ПАЙ: Забери еду у самого слабого.",
        "ТЕМНИЦА: Скрой факт любого игрока навсегда.", "ВЗРЫВАТЕЛЬ: Уничтожь 1 характеристику (на выбор) у цели.", "ПАРАЗИТ: Каждый ход забирай у соседа по 1 полезному предмету.", "АДВОКАТ ДЬЯВОЛА: Защити самого подозрительного игрока (иммунитет).", "БЕСПРЕДЕЛ: Перемешай все карты профессий между игроками.",
        "ТЕРПИЛА: Игрок обязан принимать на себя все негативные карты круга.", "ШЛЕМ: Защита от любой атаки на этот круг.", "РАЗОБЛАЧЕНИЕ: Покажи всем, что факт игрока — ложь.", "САНКТ-ПЕТЕРБУРГ: Расчлени багаж соседа (удали 2 предмета).", "ВУДУ: Наносишь вред себе — такой же вред получает цель.",
        "ПЕРЕЗАГРУЗКА: Все скидывают карты действий и берут новые.", "ЗАКЛАДКА: Найди спрятанный предмет в бункере (багаж +1).", "СКАМ: Обменяй свой пустой рюкзак на полный багаж соседа.", "ТРОЛЛЬ: Заставь игрока говорить только гадости о себе.", "ИСТЕРИКА: Игрок должен кричать свою речь, иначе изгнание.",
        "КОРОль БУНКЕРА: Твой голос весит как три, но ты открываешь факт.", "ПОДСОБНИК: Ты и другой игрок становитесь командой на круг.", "РЕИНКАРНАЦИЯ: Смени персонажа полностью (но сохрани багаж).", "МИННОЕ ПОЛЕ: Кто проголосует против тебя, теряет багаж.", "КИБЕРПАНК: Замени болезнь игрока на крутой имплант (факт).",
        "ОТРАВЛЕННЫЙ КОЛОДЕЦ: Здоровье всех падает на 1 уровень.", "ДЕФИБРИЛЛЯТОР: Спаси того, кого уже изгнали.", "ЧЕРНАЯ МЕТКА: Игрок обязан оправдываться весь круг.", "ВОРОВСКАЯ ЧЕСТЬ: Верни украденный багаж, получи 2 карты действий.", "ЭЛИТА: Профессии 'высшего класса' получают иммунитет.",
        "БУНТ: Голосуем только против тех, у кого есть оружие.", "ДЕВА МАРИЯ: Твоя плодовитость становится 100%, здоровье — топ.", "ГЕНОЦИД: Удали из игры всех игроков с определенной фобией.", "СТРАШНЫЙ СУД: Изгнание двоих игроков вместо одного.", "АПОКАЛИПСИС: Все открывают все свои карты прямо сейчас.",
        "ШИЗОФРЕНИЯ: У игрока теперь две профессии (вторая из колоды).", "МОРФИН: Игрок не чувствует эффектов болезней 2 круга.", "КРЫСИНЫЙ ЯД: Убей животное из багажа или хобби соседа.", "ПРОРОЧЕСТВО: Назови имя того, кто уйдет. Если угадала — бонус.", "ВА-БАНК: Сбрось всё, чтобы выгнать любого игрока без суда.",
        "ЗОЛОТАЯ МОЛОДЕЖЬ: Тебя нельзя выгнать, пока жив любой 'врач'.", "ХАКЕРСКАЯ АТАКА: Выключи свет (все голосуют вслепую).", "ДЕФИЦИТ: Запрети использовать аптечки на этом кругу.", "ШАНТАЖИСТ: Если игрок не отдаст багаж, ты вскроешь его факт.", "ТАБУ: Запрети называть профессию игрока во время обсуждения.",
        "ЖЕРТВОПРИНОШЕНИЕ: Скинь свой лучший предмет, чтобы спасти друга.", "НАЕМНИК: Заплати багажом, чтобы другой игрок проголосовал за тебя.", "ЖЕЛЕЗНЫЙ ЗАНАВЕС: Никто не может смотреть твои карты.", "ПЕРЕДОЗИРОВКА: Случайная смерть (вылет) игрока с 'зависимостью'.", "СЫЩИК: Узнай, какие карты действий лежат на руке у цели.",
        "БЕЗУМИЕ: Игрок меняет своего персонажа на персонажа соседа.", "ПЛАТЕЖКА: Заставь игрока отдать тебе карту действия.", "КАРА БОЖЬЯ: Игрок с фактом 'Зэк' или 'Убийца' уходит сразу.", "ОБЩАК: Собери по одному предмету у всех и раздай поровну.", "РЕСТАРТ: Игра начинается заново с этого момента.",
        "КОЗЕЛ ОТПУЩЕНИЯ: Выбери игрока, за которого будут все голосовать.", "ПРОВОКАТОР: Заставь двух игроков спорить, пока один не сдастся.", "ЭКСПЕРИМЕНТ: Игрок получает новую мутацию (случайный факт).", "ИНВАЛИДНОСТЬ: Сделай игрока хромым (минус к выживанию).", "ПОСЛЕДНЕЕ ЖЕЛАНИЕ: Перед изгнанием игрок меняет статы любому.",
        "САБОТАЖНИК: Испорти оборудование бункера (минус места).", "ДИКТАТОР: Ты сам выбираешь, кто уйдет, но отдаешь весь багаж.", "МИРОТВОРЕЦ: В этот круг никто не может быть изгнан.", "МАГНАТ: У кого больше всего багажа, тот получает +2 голоса.", "ЗЕРКАЛО МЕРТВЕЦА: Скопируй статы уже изгнанного игрока.",
        "СЛЕПОЕ ПРАВОСУДИЕ: Изгоняем того, на кого укажет кубик.", "КУРЬЕР: Достань любой предмет из колоды багажа.", "ФЕЙК-НЬЮС: Напиши любой факт игроку (теперь это правда).", "ГРЯЗНЫЙ ГАРРИ: Угрожай игроку, чтобы он промолчал.", "КРИЗИС: Половина игроков должна сбросить по 2 предмета.",
        "СПАСАТЕЛЬНЫЙ КРУГ: Передай свой иммунитет другому.", "ТОКСИК: Твои слова наносят урон (игрок получает стресс/фобию).", "ОШИБКА ВРАЧА: Хотели вылечить, но сделали хуже (здоровье вниз).", "ГЕНЕТИЧЕСКИЙ СБОЙ: Репродукция игрока падает до нуля.", "ЭЙФОРИЯ: Все болезни игрока временно не считаются.",
        "ОТКАТ: Верни карту действия в колоду и возьми новую.", "СНАЙПЕР: Удали предмет из рук игрока прямо во время его речи.", "ВНЕЗАПНАЯ СМЕРТЬ: Если у игрока 3+ болезни, он вылетает.", "БЛАГОТВОРИТЕЛЬНОСТЬ: Раздай свои болезни другим поровну.", "ФИНАЛЬНЫЙ РЫВОК: В конце игры ты можешь заменить 1 характеристику."
        ];        
       const MY_BUNKER_EVENTS = {
        REID: [
        { t: "БАНДА ПУСТОШИ", d: "К шлюзу подошли мародеры. Требуют ресурсы или чью-то жизнь.", img: "https://images.unsplash.com/photo-1510212001307-88989504a7b7?w=800" },
        { t: "НОЧНОЙ ГРАБЕЖ", d: "Кто-то пробрался в вентиляцию. Пропала часть еды и медикаментов.", img: "https://images.unsplash.com/photo-1509248961158-e54f6934749c?w=800" },
        { t: "ОТРАВЛЕННЫЙ ВОЗДУХ", d: "В систему очистки попал токсин. Здоровье всех под угрозой.", img: "https://images.unsplash.com/photo-1523438097201-512ae7d59c44?w=800" },
        { t: "ТЕХНОГЕННЫЙ СБОЙ", d: "Реактор нестабилен. Нужен инженер или кто-то очень смелый.", img: "https://images.unsplash.com/photo-1451187580459-43490279c0fa?w=800" },
        { t: "КРЫСИНАЯ ОСАДА", d: "Тысячи мутировавших грызунов грызут проводку бункера.", img: "https://images.unsplash.com/photo-1534177616072-ef7414fe9d58?w=800" },
        { t: "ОБВАЛ ШАХТЫ", d: "Вход заблокирован тоннами камня. Кислорода станет меньше.", img: "https://images.unsplash.com/photo-1518709268805-4e9042af9f23?w=800" },
        { t: "ПСИХИЧЕСКАЯ АТАКА", d: "Снаружи транслируют сводящий с ума ультразвук. Все вскрывают фобии.", img: "https://images.unsplash.com/photo-1506466010722-395aa2bef877?w=800" },
        { t: "ЧЕРНАЯ ПЛЕСЕНЬ", d: "На складе с едой обнаружен грибок. Минус 50% запасов.", img: "https://images.unsplash.com/photo-1511174511562-5f7f185879f9?w=800" },
        { t: "ДИВЕРСИЯ ВНУТРИ", d: "Кто-то перерезал кабели связи. Шпион среди вас?", img: "https://images.unsplash.com/photo-1551703599-6b3e8379aa81?w=800" },
        { t: "ВЫБРОС РАДИАЦИИ", d: "Счётчики Гейгера зашкаливают. Нужна полная герметизация.", img: "https://images.unsplash.com/photo-1536640810155-571646383637?w=800" },
        { t: "КИБЕР-ВЗЛОМ", d: "Внешний терминал взломан. Двери шлюза могут открыться сами.", img: "https://images.unsplash.com/photo-1550751827-4bd374c3f58b?w=800" },
        { t: "ОХОТНИКИ ЗА ОРГАНАМИ", d: "Группа людей в масках требует выдать самого здорового игрока.", img: "https://images.unsplash.com/photo-1509248961158-e54f6934749c?w=800" },
        { t: "КРОВАВЫЙ ТУМАН", d: "Снаружи всё затянуло багровой дымкой. Никто не может выйти.", img: "https://images.unsplash.com/photo-1519125323398-675f0ddb6308?w=800" },
        { t: "ДРОНЫ-УБИЙЦЫ", d: "Автоматические системы охраны сошли с ума и палят по входу.", img: "https://images.unsplash.com/photo-1508614589041-895b88991e3e?w=800" },
        { t: "ЗАТОПЛЕНИЕ", d: "Прорвало трубу на нижних ярусах. Часть багажа утонула.", img: "https://images.unsplash.com/photo-1510411273645-a435121ca4d0?w=800" },
        { t: "РЕЛИГИОЗНЫЙ КУЛЬТ", d: "Фанатики обложили бункер хворостом и требуют 'жертву'.", img: "https://images.unsplash.com/photo-1515232998168-96fe46420500?w=800" },
        { t: "ЗЕМЛЕТРЯСЕНИЕ", d: "Сейсмическая активность повредила жилой отсек.", img: "https://images.unsplash.com/photo-1464306208223-e0b4495a5553?w=800" },
        { t: "ПАРАЗИТЫ В ВОДЕ", d: "В резервуарах завелись черви. У всех -1 к здоровью.", img: "https://images.unsplash.com/photo-1518115391078-f73fd9763065?w=800" },
        { t: "ХОЛОДНЫЙ ФРОНТ", d: "Отопление отключилось. Температура падает до -20°C.", img: "https://images.unsplash.com/photo-1483366759385-15df7d99ce47?w=800" },
        { t: "ИНФОРМАЦИОННЫЙ ГОЛОД", d: "Потеряны все данные о внешнем мире. Паника растет.", img: "https://images.unsplash.com/photo-1485856402741-49418636a57e?w=800" }
        ],
        SURVIVOR: [
        { t: "РАНЕНЫЙ СТРАННИК", d: "У входа человек с кейсом. Он просит убежища и бинты.", img: "https://images.unsplash.com/photo-1536440136628-849c177e76a1?w=800" },
        { t: "УЧЕНЫЙ-ИЗГОЙ", d: "Женщина в белом халате утверждает, что знает пароль от склада.", img: "https://images.unsplash.com/photo-1518152006812-edab29b069ac?w=800" },
        { t: "РЕБЕНОК-МУТАНТ", d: "Мальчик с тремя глазами просится внутрь. Он несет мешок семян.", img: "https://images.unsplash.com/photo-1473186578172-c141e6798ee4?w=800" },
        { t: "БЫВШИЙ ОХРАННИК", d: "Мужчина в бронежилете предлагает защиту в обмен на еду.", img: "https://images.unsplash.com/photo-1508704019882-f9cf40e475b4?w=800" },
        { t: "СТАРЫЙ ТОРГОВЕЦ", d: "Предлагает обменять ваш багаж на редкое лекарство.", img: "https://images.unsplash.com/photo-1513346456226-790fd10d4a95?w=800" },
        { t: "ПРОПОВЕДНИК", d: "Обещает спасение души, но требует сжечь всё оружие.", img: "https://images.unsplash.com/photo-1438210125604-144d82440835?w=800" },
        { t: "СУМАСШЕДШИЙ ХАКЕР", d: "Говорит, что может улучшить бункер, но выглядит крайне подозрительно.", img: "https://images.unsplash.com/photo-1515879218367-8466d910aaa4?w=800" },
        { t: "ДЕВУШКА С ОЖОГАМИ", d: "Она была в эпицентре взрыва. Знает, где находятся другие бункеры.", img: "https://images.unsplash.com/photo-1521117660421-ce741d77a0b1?w=800" },
        { t: "БРОДЯЧИЙ ПОВАР", d: "Готов готовить из чего угодно. Может увеличить запасы еды.", img: "https://images.unsplash.com/photo-1516714435131-44d6b64dc6a2?w=800" },
        { t: "БЫВШИЙ МЭР", d: "Требует власти и лучшую кровать. Обещает порядок.", img: "https://images.unsplash.com/photo-1507679799987-c73779587ccf?w=800" },
        { t: "ЖЕНЩИНА С МЛАДЕНЦЕМ", d: "Просят только воду. Ребенок выглядит здоровым.", img: "https://images.unsplash.com/photo-1519689680058-324335c77eba?w=800" },
        { t: "ГРУППА БЕЖЕНЦЕВ", d: "5 человек просят зайти на одну ночь. Могут принести пользу или заразу.", img: "https://images.unsplash.com/photo-1529156069898-49953e39b3ac?w=800" },
        { t: "КАННИБАЛ ПОНЕВОЛЕ", d: "Просится внутрь, пряча окровавленные руки. Клянётся, что изменился.", img: "https://images.unsplash.com/photo-1463171379579-3fdfb86d6285?w=800" },
        { t: "СЛЕПОЙ МУЗЫКАНТ", d: "Его музыка успокаивает и лечит фобии. У него нет вещей.", img: "https://images.unsplash.com/photo-1493225255756-d9584f8606e9?w=800" },
        { t: "ВЕТЕРИНАР-ОТСШЕЛЬНИК", d: "Пришел с собакой-ищейкой. Может вылечить болезни животных.", img: "https://images.unsplash.com/photo-1441985969246-3d4c58e37991?w=800" },
        { t: "ИНЖЕНЕР С ЧЕРТЕЖАМИ", d: "Знает, как расширить бункер на еще одно место.", img: "https://images.unsplash.com/photo-1503387762-592dea58ed23?w=800" },
        
       
        { t: "БЕГЛЫЙ ЗЭК", d: "Угрюмый тип с ломом. Предлагает грубую силу.", img: "https://images.unsplash.com/photo-1511367461989-f85a21fda167?w=800" },
        { t: "ДЕВУШКА С ВИРУСОМ", d: "Она заражена, но у неё есть антидот для других.", img: "https://images.unsplash.com/photo-1526253033507-4467ec74485c?w=800" },
        { t: "ГЕОЛОГ-НЕУДАЧНИК", d: "Нашел золото, но потерял всю воду. Просит обмена.", img: "https://images.unsplash.com/photo-1510915228340-29c85a43dcfe?w=800" },
        { t: "ВОЕННЫЙ ДЕЗЕРТИР", d: "Сбежал с базы с ящиком патронов. Ищет мирной жизни.", img: "https://images.unsplash.com/photo-1525417071002-5ee4e6bb44f7?w=800" }
        ]
        };
        const LISTS = { sex: ["МУЖ", "ЖЕН"],
                    prof: ["Хирург-трансплантолог", "Инженер ядерных реакторов", "Шеф-повар", "Пилот боевого дрона", "Кибер-криминалист", "Астробиолог", "Психолог-манипулятор", "Гробовщик", "Учитель выживания", "Дипломат ООН", "Физик", "Хакер", "Снайпер", "Фермер-генетик", "Архитектор бункеров", "Ветеринар хищников", "Морской биолог", "Священник-экзорцист", "Инженер-робототехник", "Пилот гражданской авиации", "Токсиколог", "Оператор РЛС", "Горноспасатель", "Криптограф", "Эпидемиолог", "Профессиональный наемник", "Геолог-разведчик", "Метеоролог", "Крановщик", "Сапер", "Лесник", "Фармацевт", "Инкассатор", "Авиаконструктор", "Судмедэксперт", "Сварщик-подводник", "Системный администратор", "Следователь по особо важным", "Промышленный альпинист", "Биохимик", "Машинист поезда", "Картограф", "Диетолог", "Парамедик", "Специалист по связям с общественностью", "Профайлер", "Океанограф", "Переводчик-синхронист", "Электрик высокого разряда", "Учитель химии", "Пожарный-парашютист", "Дрессировщик служебных собак", "Логист", "Техник по обслуживанию лифтов", "Кузнец", "Юрист по международному праву", "Космонавт-исследователь", "Лаборант химического анализа", "Реставратор оружия", "Механик тяжелой техники", "Капитан дальнего плавания", "Гидролог", "Бурильщик скважин", "Военный переводчик", "Эколог", "Физиотерапевт", "Программист ИИ", "Плотник", "Архивариус", "Журналист-расследователь", "Инженер-строитель мостов", "Каскадер", "Оружейный мастер", "Охотовед", "Радиотехник", "Травматолог", "Бальзамировщик", "Оператор АЭС", "Слесарь-инструментальщик", "Моторист", "Пчеловод", "Кинолог", "Логопед", "Сомелье", "Ювелир", "Охранник ЧОП", "Матрос", "Таксист со стажем", "Кладовщик", "Агроном", "Зоопсихолог", "Оптик", "Телохранитель", "Стеклодув", "Энергетик", "Эксперт-искусствовед", "Спелеолог", "Коллектор", "Криминалист-баллистик", "Директор морга"],         
                    health: ["Тяжелая астма", "Диабет 1 типа", "Лучевая болезнь", "Бессонница", "Слепота", "Глухота", "Мигрени", "Артрит", "Сколиоз", "Анемия", "Идеальное здоровье", "Железный иммунитет", "Крепкое сердце", "Дальтонизм", "Гастрит", "Порок сердца", "Ожирение 2 степени", "Истощение", "Аллергия на пыльцу", "Эпилепсия", "Психосоматический кашель", "Почечная недостаточность", "Плохое зрение (-5)", "Хронический бронхит", "Нарколепсия", "Дрожь в руках (тремор)", "Панические атаки", "Болезнь Крона", "Заикание", "Хроническая усталость", "Хромота на левую ногу", "Отсутствие фаланги пальца", "Чувствительная кожа", "Плохая свертываемость крови", "Грыжа позвоночника", "Тугоухость", "Язва желудка", "Аллергия на арахис", "Ипохондрия", "Варикоз", "Остеопороз", "Хронический гайморит", "Тахикардия", "Низкий болевой порог", "Гипертония", "Повышенный сахар", "Дефицит кальция", "Нарушение координации", "Аллергия на лактозу", "Амнезия частичная", "Псориаз", "Синдром раздраженного кишечника", "Невралгия", "Потеря обоняния", "Гемофилия", "Рассеянный склероз", "Конъюнктивит хронический", "Плоскостопие 3 степени", "Вегетососудистая дистония", "Метеозависимость", "Кариес запущенный", "Изжога", "Цистит", "Дерматит", "Ревматизм", "Синдром Туретта (легкий)", "Высокий метаболизм", "Гибкие суставы", "Острый слух", "Ночное зрение (хорошее)", "Быстрая регенерация", "Слабый вестибулярный аппарат", "Фотофобия (светобоязнь)", "Хрупкие кости", "Одышка", "Желчнокаменная болезнь", "Туберкулез (ремиссия)", "Аллергия на кошек", "Депрессия клиническая", "Посттравматическое расстройство", "Повышенная потливость", "Мышечная дистрофия", "Ранняя стадия Паркинсона", "Холестерин выше нормы", "Шум в ушах", "Ожоги на 20% тела", "Старая травма колена", "Глаукома начальная", "Повышенная тревожность", "Авитаминоз", "Чувствительность к глютену", "Искривление носовой перегородки", "Мышечные судороги", "Бесплодие", "Камни в почках", "Непереносимость жары", "Переохлаждение", "Морская болезнь", "Золотистый стафилококк", "Здоровый атлет", "Крепкие зубы"],
                    bag: ["Аптечка полная", "Охотничий нож", "Фонарик LED", "Рация", "Счётчик Гейгера", "Запас еды", "Семена", "Топор стальной", "Бинокль", "Зажигалка Zippo", "Компас", "Карта области", "Спальный мешок", "Складная пила", "Котелок алюминиевый", "Фляга с водой", "Рулон скотча (армированный)", "Набор рыболовных крючков", "Солнечная панель (мини)", "Мультитул", "Паракорд (15 метров)", "Противогаз", "Огниво", "Бронежилет 2 класса", "Монтировка", "Сухое горючее", "Фильтр для воды", "Набор отмычек", "Сигнальная ракета", "Термос", "Газовая горелка", "Тент непромокаемый", "Газовая маска", "Лопата саперная", "Моток проволоки", "Пакеты для мусора (крепкие)", "Мыло и антисептик", "Спички охотничьи", "Фонарь налобный", "Кастет", "Перцовый баллончик", "Резиновые сапоги", "Арбалет с 3 болтами", "Запасные батарейки", "Набор иголок и ниток", "Светоотражающий жилет", "Свисток спасательный", "Ножовка по металлу", "Бутылка водки (для дезинфекции)", "Блокнот и карандаш", "Зеркальце сигнальное", "Стальные карабины", "Веревка альпинистская", "Санитайзер", "Молоток", "Стамеска", "Гвозди (полкило)", "Дождевик", "Запасная одежда", "Увеличительное стекло", "Канистра пустая", "Шланг резиновый", "Мегафон", "Катушка лески", "Набор надфилей", "Респиратор", "Резиновые перчатки", "Замок навесной", "Пневматический пистолет", "Рогатка профессиональная", "Металлическая кружка", "Йод и зеленка", "Бинты стерильные", "Набор ключей (гаечных)", "Изолента синяя", "Магниевый стержень", "Очки защитные", "Салфетки влажные", "Кожаный ремень", "Набор сверл", "Рулетка 5м", "Отвертка крестовая", "Газовый ключ", "Шило", "Складной стакан", "Герметичный пакет", "Сухой паек МЧС", "Термоодеяло", "Мел", "Гвоздодер", "Баллончик с краской", "Цепь металлическая", "Наждачная бумага", "Пассатижи", "Налобная линза", "Фляжка с коньяком", "Мешочек соли", "Пачка сахара", "Кофе растворимый", "Пустой рюкзак"],
                    facts: ["Знает код от сейфа", "Мастер рукопашного боя", "Бывший агент", "Гениальный математик", "Служил в точках", "Умеет чинить всё", "Бывший зэк", "Патологический лжец", "Психопат", "Клептоман", 
                    "Умеет читать по губам", "Владеет гипнозом", "Бывший сапер", "Знает азбуку Морзе", "Мастер взлома замков", "Скрывается от интерпола", "Бывший дегустатор ядов", "Умеет водить вертолет", "Сын/дочь миллиардера", "Помнит всё (гипертимезия)", 
                    "Мастер маскировки", "Бывший работник морга", "Знает 7 языков", "Умеет шить раны", "Бывший сектант", "Служил в иностранном легионе", "Мастер игры в покер", "Умеет метать ножи", "Профессиональный альпинист", "Бывший телохранитель", 
                    "Знает устройство АЭС", "Умеет распознавать ложь", "Бывший двойной агент", "Мастер социальной инженерии", "Умеет выживать в пустыне", "Бывший пилот-испытатель", "Знает карту подземных коммуникаций", "Бывший охотник на людей", "Мастер ядов и антидотов", "Умеет задерживать дыхание на 4 минуты", 
                    "Бывший инструктор по стрельбе", "Знает слабые точки на теле", "Бывший хакер-активист", "Умеет обращаться с лошадьми", "Бывший военный врач", "Мастер партизанской войны", "Знает расположение военных складов", "Бывший коллектор", "Умеет подделывать документы", "Бывший эксперт-криминалист", 
                    "Мастер бесшумного передвижения", "Знает все съедобные грибы", "Бывший разведчик", "Умеет управлять яхтой", "Бывший оперативник ФСБ", "Мастер стрельбы из лука", "Знает коды доступа к спутникам", "Бывший заложник", "Умеет дрессировать хищников", "Бывший инкассатор", 
                    "Мастер холодного оружия", "Знает рецепт термита", "Бывший физик-ядерщик", "Умеет предсказывать погоду", "Бывший картограф", "Мастер пыток", "Знает как вскрыть банкомат", "Бывший подводник", "Умеет лечить травами", "Бывший священник", 
                    "Мастер психологического давления", "Знает как собрать рацию из мусора", "Бывший гонщик", "Умеет ориентироваться по звездам", "Бывший киллер", "Мастер каллиграфии", "Знает где спрятаны архивы", "Бывший лаборант секретной базы", "Умеет делать самопалы", "Бывший десантник", 
                    "Мастер допроса", "Знает структуру правительства", "Бывший шпион-нелегал", "Умеет ловить рыбу голыми руками", "Бывший дипломат", "Мастер спорта по фехтованию", "Знает чертежи бункеров города", "Бывший лесничий", "Умеет взламывать умные дома", "Бывший патологоанатом", 
                    "Мастер по самодельному оружию", "Знает частоты спецслужб", "Бывший вор-домушник", "Умеет делать противогазы из подручных средств", "Бывший снайпер спецназа", "Мастер джиу-джитсу", "Знает уязвимости систем защиты", "Бывший спасатель", "Умеет добывать воду из воздуха", "Бывший военный переводчик", 
                    "Мастер по выживанию в лесу", "Знает как обмануть детектор лжи", "Бывший авиадиспетчер", "Умеет чинить двигатели", "Бывший судмедэксперт", "Мастер игры на скрипке", "Знает как сделать взрывчатку из химии", "Бывший повар в тюрьме", "Умеет читать следы животных", "Бывший член ОПГ", 
                    "Мастер по электронике", "Знает расположение очистных сооружений", "Бывший аналитик ГРУ", "Умеет обращаться со взрывчаткой", "Бывший стюард", "Мастер подледной ловли", "Знает все тайные ходы в метро", "Бывший пожарный", "Умеет шить одежду", "Бывший ветеринар", 
                    "Мастер по замкам и сейфам", "Знает формулу универсального антибиотика", "Бывший морпех", "Умеет водить фуру", "Бывший кибер-полицейский", "Мастер йоги", "Знает уязвимые места зданий", "Бывший каскадер", "Умеет охотиться с копьем", "Бывший библиотекарь секретного архива", 
                    "Мастер по установке ловушек", "Знает как взломать систему вентиляции", "Бывший механик танков", "Умеет добывать огонь трением", "Бывший радист", "Мастер спорта по боксу", "Знает как очистить воду радиации", "Бывший эколог", "Умеет управлять дронами", "Бывший инструктор по дайвингу", 
                    "Мастер ножевого боя", "Знает как обойти датчики движения", "Бывший метеоролог", "Умеет работать на токарном станке", "Бывший геолог", "Мастер гипнотического внушения", "Знает тайники контрабандистов", "Бывший надзиратель", "Умеет распознавать ядовитые пары", "Бывший профайлер", 
                    "Мастер кузнечного дела", "Знает частоту правительственной связи", "Бывший пограничник", "Умеет делать ловушки на людей", "Бывший оптик", "Мастер спортивного ориентирования", "Знает секреты фармацевтики", "Бывший водитель скорой помощи", "Умеет вскрывать электронные замки", "Бывший взрывотехник", 
                    "Мастер рукопашного боя Крав-мага", "Знает точки сброса припасов", "Бывший сотрудник ЦРУ", "Умеет обходиться без сна 3 дня", "Бывший агроном", "Мастер игры в го", "Знает как сделать порох", "Бывший электрик", "Умеет водить любой спецтранспорт", "Бывший системный администратор МВД", 
                    "Мастер маскировки на местности", "Знает коды отмены ракет", "Бывший психиатр", "Умеет разделывать любую тушу", "Бывший штурман", "Мастер скоростной стрельбы", "Знает где находятся запасы семян", "Бывший зоолог", "Умеет общаться жестами", "Бывший спец по прослушке", 
                    "Мастер по изготовлению брони", "Знает лазейки в законах", "Бывший следователь", "Умеет определять направление ветра по звуку", "Бывший фотограф-шпион", "Мастер по ремонту раций", "Знает где лежат ключи от города", "Бывший донор крови", "Умеет предсказывать землетрясения", "Бывший дрессировщик собак", 
                    "Мастер по скрытому ношению оружия", "Знает как сделать фильтр для воздуха", "Бывший топограф", "Умеет строить плоты", "Бывший гроссмейстер", "Мастер по созданию помех", "Знает тайные сигналы банд", "Бывший врач-инфекционист", "Умеет прыгать с парашютом", "Бывший оружейный мастер", 
                    "Мастер завязывания морских узлов", "Знает как отключить сигнализацию", "Бывший связист", "Умеет находить воду под землей", "Бывший инспектор ГИБДД", "Мастер по работе с металлом", "Знает как выжить при 50 градусах", "Бывший моряк-наемник", "Умеет делать антисептик", "Обладает иммунитетом к змеиному яду"],
                    hobby: ["Стрельба", "Бокс", "Шахматы", "Йога", "Паркур", "Дайвинг", "Садоводство", "Вязание", "Рыбалка", "Охота", "Рисование", "Кулинария", "Коллекционирование марок", "Моделирование кораблей", "Бег на длинные дистанции", "Фехтование", "Скалолазание", "Чтение классики", "Фотография", "Игра на гитаре", "Резьба по дереву", "Астрономия", "Велоспорт", "Пение в хоре", "Настольные игры", "Карточные фокусы", "Пчеловодство", "Походы", "Шитье одежды", "Оригами", "Каллиграфия", "Танцы (латино)", "Ремонт старых часов", "Метание диска", "Гимнастика", "Тяжелая атлетика", "Наблюдение за птицами", "Изготовление свечей", "Нумизматика (монеты)", "Мыловарение", "Фехтование на мечах", "Изучение мертвых языков", "Мотоциклы", "Пилотирование", "Составление кроссвордов", "Покер", "Медитация", "Спелеология", "Реставрация мебели", "Скрапбукинг", "Плетение из лозы", "Гончарное дело", "Моделирование одежды", "Киберспорт", "Театр", "Стрельба из лука", "Плавание", "Дизайн интерьеров", "Собирание пазлов", "Вышивание крестиком", "Резьба по кости", "Бодибилдинг", "Укрощение змей", "Парфюмерия", "Игра на фортепиано", "Декупаж", "Пирография (выжигание)", "Ландшафтный дизайн", "Пивоварение", "Виноделие", "Макраме", "Бои без правил", "Регби", "Лыжи", "Сноубординг", "Серфинг", "Прыжки с парашютом", "Коллекционирование винила", "Уличное граффити", "Моделирование самолетов", "Энтомология (насекомые)", "Палеонтология (ископаемые)", "Книжный клуб", "Резьба по камню", "Стрит-арт", "Блогинг", "Фольклористика", "Изучение боевых искусств", "Ролики", "Скейтбординг", "Волейбол", "Баскетбол", "Теннис", "Гольф", "Бильярд", "Кегельбан", "Составление гербариев", "Мозаика", "Витражное искусство", "Сон"],
                    phob: ["Темнота", "Высота", "Пауки", "Кровь", "Огонь", "Глубина", "Микробы", "Змеи", "Врачи", "Толпа", "Замкнутые пространства", "Клоуны", "Громкие звуки", "Острые предметы", "Вода", "Одиночество", "Смерть", "Насекомые", "Птицы", "Собаки", "Стоматологи", "Старение", "Болезни", "Полеты на самолете", "Открытые пространства", "Публичные выступления", "Технологии (ИИ)", "Грызуны", "Гром и молния", "Призраки", "Зеркала", "Куклы", "Микрофоны", "Грязные руки", "Потеря памяти", "Пчелы и осы", "Больницы", "Химикаты", "Радиация", "Роботы", "Зубная боль", "Иголки (уколы)", "Ответственность", "Неудача", "Критика", "Грязь", "Лес", "Туман", "Гниль", "Скорость", "Лифты", "Мертвые тела", "Кладбища", "Неизвестность", "Галлюцинации", "Потеря контроля", "Отражения", "Боль", "Слабость", "Предательство", "Темная вода", "Подвалы", "Чердаки", "Старые дома", "Глубокий снег", "Песок (зыбучие пески)", "Ветер (ураганы)", "Дождь", "Холод", "Жара", "Электричество", "Сон (кошмары)", "Тишина", "Смех (чужой)", "Наблюдение за собой", "Прикосновения", "Маски", "Большие предметы", "Крошечные отверстия (трипофобия)", "Поезда", "Мосты", "Тоннели", "Подводные лодки", "Оружие", "Полиция", "Суд", "Тюрьма", "Насилие", "Гнев", "Слезы", "Психиатрические лечебницы", "Лекарства", "Взрывы", "Пыль", "Кошки", "Большие города", "Пустые улицы", "Старость", "Будущее", "Сама жизнь"],
                    fert: ["ПЛОДОВИТ (ИДЕАЛЬНО)", "БЕСПЛОДЕН", "ГЕНЕТИЧЕСКАЯ МУТАЦИЯ ДНК", "БОЛЕЛ ЗППП (50/50)", "СУПЕР-ГЕНЕТИКА"],}
        const LABELS = {bio: 'БИО', prof: 'Профессию', health: 'Здоровье', bag: 'Багаж', hobby: 'Хобби', phob: 'Фобию', fert: 'Репродукцию', f1: 'Факт 1', f2: 'Факт 2'};

        const { useState, useEffect } = React;
        function App() {
            const [isUnlocked, setIsUnlocked] = useState(false);
            const [sitePass, setSitePass] = useState("");
            const [gameState, setGameState] = useState(null);
            const [isAdmin, setIsAdmin] = useState(false);
            const [showPassModal, setShowPassModal] = useState(false);
            const [showResetModal, setShowResetModal] = useState(false);
            const [passInput, setPassInput] = useState("");
            const [pCount, setPCount] = useState(8);
            const [initPass, setInitPass] = useState("");
            const [user, setUser] = useState(null);
            const ADMIN_PASSWORD = "1337";
            const ENTRY_PASSWORD = "1212"; 

            useEffect(() => {
                db.ref('game').on('value', snap => setGameState(snap.val()));
                auth.onAuthStateChanged(u => { if(u) setUser(u); else auth.signInAnonymously(); });
            }, []);

            useEffect(() => {
                if (!isAdmin || !gameState || !gameState.active) return;
                const timer = setInterval(() => { 
                db.ref('game/time').transaction(t => (t || 0) + 1); 
                playSfx(sfx.tick); 
                        if (gameState.turnTime > 0) {
                db.ref('game/turnTime').transaction(t => t - 1);
            }
                }, 1000);
                return () => clearInterval(timer);
            }, [isAdmin, gameState?.active, gameState?.turnTime]);

            const handleAdminLogin = () => { if (passInput === ADMIN_PASSWORD) { setIsAdmin(true); setShowPassModal(false); } else alert("Ошибка!"); setPassInput(""); };
            const update = (path, val) => db.ref(`game/${path}`).set(val);
            const roll = (t, currentAge = 50) => 
                    {
                    if (t === 'age') return Math.floor(Math.random() * (99 - 18 + 1)) + 18; 
                    if (t === 'years') {
                    const maxExp = Math.max(1, currentAge - 18); 
                    return Math.floor(Math.random() * maxExp) + 1;
                 }
    
                const list = LISTS[t === 'f1' || t === 'f2' ? 'facts' : t];
                return list[Math.floor(Math.random() * list.length)];
            };
            const init = () => {
                if (initPass !== ADMIN_PASSWORD) { alert("Ошибка!"); return; }
                const players = Array.from({ length: parseInt(pCount) }, (_, i) => ({ id: i + 1, uid: '', name: `ОБЪЕКТ ${i + 1}`, sex: roll('sex'), age: roll('age'), prof: roll('prof'), profExp: roll('years'), health: roll('health'), bag: roll('bag'), hobby: roll('hobby'), hobbyExp: roll('years'), phob: roll('phob'), f1: roll('facts'), f2: roll('facts'), fert: roll('fert'), actions: [MY_ACTION_CARDS[Math.floor(Math.random()*MY_ACTION_CARDS.length)], MY_ACTION_CARDS[Math.floor(Math.random()*MY_ACTION_CARDS.length)]], revealed: {}, votedBy: [], isExiled: false, avatar: `https://i.pravatar.cc/300?u=${Math.random()}` }));
                db.ref('game').set({ players, time: 0, active: false, speakerId: null, globalStop: null, dice: 1, turnTime: 0, bunker: { d: 'КАТАСТРОФА...', b: 'БУНКЕР...', i: 'ИНВЕНТАРЬ...' } });
            };

            if (!isUnlocked) return (
                <div className="glass-overlay"><div className="glass-box">
                    <h1 className="text-4xl font-black mb-10 tracking-widest uppercase">ДОСТУП ЗАБЛОКИРОВАН</h1>
                    <input autoFocus type="password" value={sitePass} onChange={e => setSitePass(e.target.value)} onKeyDown={e => e.key === 'Enter' && sitePass === ADMIN_PASSWORD && setIsUnlocked(true)} className="p-input" placeholder="Пароль сайта" />
                    <button onClick={() => sitePass === ENTRY_PASSWORD ? setIsUnlocked(true) : alert("Ошибка!")} className="bg-white text-black px-16 py-6 rounded-3xl font-black uppercase text-xl w-full">Войти</button>
                </div></div>
            );

            if (!user || !gameState) return (
                <div className="glass-overlay"><div className="glass-box">
                    <h1 className="text-4xl font-black mb-10 tracking-widest uppercase">BUNKER</h1>
                    <p className="text-sm opacity-50 mb-2 uppercase font-bold text-left px-2">Пароль создания</p>
                    <input type="password" value={initPass} onChange={e => setInitPass(e.target.value)} className="p-input" placeholder="****" />
                    <p className="text-sm opacity-50 mb-2 uppercase font-bold text-left px-2">Игроков</p>
                    <input type="number" value={pCount} onChange={e => setPCount(e.target.value)} className="p-input" />
                    <button onClick={init} className="bg-white text-black px-16 py-6 rounded-3xl font-black uppercase text-2xl w-full hover:scale-105">Начать Протокол</button>
                </div></div>
            );

            const myIdx = gameState.players.findIndex(p => p.uid === user.uid);
            const isMeSpk = myIdx !== -1 && gameState.speakerId === gameState.players[myIdx].id;
            const maxVotes = Math.max(...gameState.players.map(p => (p.votedBy || []).length));
            
            const playRevealSound = () => playSfx(sfx.open);

            return (
                <div className={`overlay ${gameState.speakerId ? 'focus-mode' : ''}`} onKeyDown={e => { if(e.shiftKey && (e.key === 'A' || e.key === 'Ф')) setShowPassModal(true) }} tabIndex="0">
                    {showPassModal && (
                        <div className="glass-overlay"><div className="glass-box">
                            <h2 className="text-3xl font-black mb-8 uppercase">Вход Админа</h2>
                            <input autoFocus type="password" value={passInput} onChange={e => setPassInput(e.target.value)} onKeyDown={e => e.key === 'Enter' && handleAdminLogin()} className="p-input" placeholder="****" />
                            <div className="flex gap-4 justify-center"><button onClick={handleAdminLogin} className="bg-white text-black px-10 py-3 rounded-xl font-black">ВХОД</button><button onClick={() => setShowPassModal(false)} className="bg-white/10 px-10 py-3 rounded-xl font-black">ОТМЕНА</button></div>
                        </div></div>
                    )}
                    {showResetModal && (
                        <div className="glass-overlay"><div className="glass-box border-red-500/50"><h2 className="text-3xl font-black mb-8 uppercase text-red-500">Сброс Системы?</h2>
                            <div className="flex gap-4 justify-center"><button onClick={() => { db.ref('game').set(null); setShowResetModal(false); }} className="bg-red-600 text-white px-10 py-3 rounded-xl font-black">СБРОСИТЬ</button><button onClick={() => setShowResetModal(false)} className="bg-white/10 px-10 py-3 rounded-xl font-black">ОТМЕНА</button></div>
                        </div></div>
                    )}
                    {gameState.currentEvent && <div className="event-overlay" onClick={() => isAdmin && update('currentEvent', null)}><div className="event-box"><img src={gameState.currentEvent.img} className="mx-auto h-96 rounded-3xl mb-8 border-2 border-white/20 shadow-2xl" /><h1 className="text-7xl font-black uppercase mb-4">{gameState.currentEvent.t}</h1><p className="text-4xl italic uppercase max-w-5xl mx-auto">"{gameState.currentEvent.d}"</p></div></div>}
                    {gameState.globalStop && <div className="glass-overlay" onClick={() => { playSfx(sfx.stop); isAdmin && update('globalStop', null); }}><div className="glass-box border-white"><h1 className="text-8xl font-black uppercase mb-2">СТОП ИГРА!</h1><h2 className="text-3xl uppercase opacity-60 mb-6">{gameState.globalStop.user} АКТИВИРУЕТ КОЗЫРЬ</h2><p className="text-4xl font-black italic">"{gameState.globalStop.text}"</p></div></div>}
                    
                    {isMeSpk && !gameState.players[myIdx].isExiled && (!gameState.turnTime || gameState.turnTime <= 0) && (
                        <div className="glass-overlay"><div className="glass-box border-white"><h2 className="text-4xl font-black text-white mb-12 uppercase tracking-widest">ПРОТОКОЛ ВСКРЫТИЯ</h2>
                            <div className="grid grid-cols-2 gap-6">{['bio','prof','health','bag','hobby','phob','fert','f1','f2'].map(f => {
                            const p = gameState.players[myIdx];
                            const isRev = f === 'bio' ? (p.revealed?.sex || p.revealed?.age) : p.revealed?.[f];
                            const val = f === 'bio' ? `${p.sex}, ${p.age}л` : p[f];
    
                        return (
                        <button key={f} 
                    disabled={isRev}
                        onClick={() => { 
                        if(!isRev) {
                        playSfx(sfx.open);
                        db.ref(`game/players/${myIdx}/revealed/${f === 'bio' ? 'sex' : f}`).set(true); 
                        if(f === 'bio') db.ref(`game/players/${myIdx}/revealed/age`).set(true); 
                        db.ref('game/turnTime').set(60);}
                    }}
                             className={`flex items-center justify-between px-6 py-4 rounded-2xl font-black uppercase text-xs transition-all border-2 
                             ${isRev ? 'bg-green-500/20 border-green-500/50 text-green-400' : 'bg-white/5 border-white/20 hover:bg-white hover:text-black'}`}
            >
                    <span>{LABELS[f]} {isRev ? '' : `(${val})`}</span>
                       {isRev && <span className="text-lg">✓</span>} {/* */}
                     </button>
                  );
                    })}</div>
                        </div></div>
                    )}

                    <div className="max-w-[1700px] mx-auto flex justify-between items-center mb-12">
                        <div className="flex gap-6"><div className="bg-white/10 border-2 border-white/20 p-3 px-10 rounded-2xl font-mono font-black text-white text-5xl">{Math.floor(gameState.time/60)}:{(gameState.time%60).toString().padStart(2,'0')}</div>
                        <div className="bg-white/10 border-2 border-white/20 p-3 px-8 rounded-2xl flex flex-col items-center justify-center cursor-pointer" onClick={(e) => {
    if(!isAdmin) return;
    playSfx(sfx.click);
    const el = e.currentTarget;
    el.classList.add('dice-rolling');
    setTimeout(() => el.classList.remove('dice-rolling'), 500);
    update('dice', Math.floor(Math.random()*3)+1);
}}><span className="text-[10px] font-black opacity-30 uppercase text-white">Шанс</span><div className="text-2xl font-black text-white">{gameState.dice}</div></div></div>
                        <div className="text-center"><h1 className="text-6xl font-black text-white tracking-tighter uppercase leading-none">Bunker </h1><p className="text-[14px] font-black opacity-30 tracking-[10px] mt-2 uppercase text-center">by lvyzap</p></div>
                        <div onClick={() => !isAdmin ? setShowPassModal(true) : setIsAdmin(false)} className={`px-8 py-3 border-2 rounded-2xl font-black text-[12px] cursor-pointer transition-all ${isAdmin ? 'bg-white text-black border-white shadow-[0_0_20px_white]' : 'opacity-20'}`}>АДМИН</div>
                    </div>

                    <div className="bunker-info-grid">{['d','b','i'].map(k => <div key={k} className="info-block"><span>{k==='d'?'Катастрофа':k==='b'?'Бункер':'Инвентарь'}</span><textarea disabled={!isAdmin} value={gameState.bunker?.[k]} onChange={e => update(`bunker/${k}`, e.target.value)} /></div>)}</div>

                    {isAdmin && <div className="flex gap-6 justify-center mb-12">
                        <button onClick={() => { playSfx(sfx.raid);update('currentEvent', MY_BUNKER_EVENTS.REID[Math.floor(Math.random()*MY_BUNKER_EVENTS.REID.length)])}} className="bg-red-900 border-2 border-red-500 px-10 py-3 rounded-2xl font-black uppercase text-xs">РЕЙД</button>
                        <button onClick={() => { playSfx(sfx.survivor);update('currentEvent', MY_BUNKER_EVENTS.SURVIVOR[Math.floor(Math.random()*MY_BUNKER_EVENTS.SURVIVOR.length)])}} className="bg-blue-900 border-2 border-blue-500 px-10 py-3 rounded-2xl font-black uppercase text-xs">ВЫЖИВШИЙ</button>
                        <button onClick={() => { playSfx(sfx.click);update('active', !gameState.active);}} className="bg-green-800 border-2 border-green-500 px-10 py-3 rounded-2xl font-black text-xs uppercase">{gameState.active ? 'ПАУЗА' : 'СТАРТ'}</button>
                        <button onClick={() => update('time', 0)} className="bg-white/10 border-2 border-white/20 px-10 py-3 rounded-2xl font-black text-xs uppercase">Сброс Таймера</button>
                        <button onClick={() => setShowResetModal(true)} className="bg-red-700 px-10 py-3 rounded-2xl font-black text-xs uppercase shadow-lg shadow-red-900/50">Сброс Системы</button>
                    </div>}

                    <div className="game-grid">{gameState.players.map((p, pIdx) => {
                        const isMe = p.uid === user.uid; const isTalking = gameState.speakerId === p.id; const isLdr = maxVotes > 0 && (p.votedBy || []).length === maxVotes;
                        return (
                            <div key={p.id} className={`p-card ${isTalking ? 'speaking-card' : ''} ${isLdr ? 'target-out' : ''} ${p.isExiled ? 'is-exiled-card' : ''}`}>
                                {p.isExiled && <div className="stamp-exile"><div className="stamp-text">ИЗГНАН</div></div>}
                                <div className="flex gap-5 mb-8 border-b border-white/10 pb-8"><div className="w-32 h-32 border-2 border-white/10 rounded-2xl overflow-hidden bg-black flex-shrink-0 shadow-2xl"><img src={p.avatar} className="w-full h-full object-cover" /></div>
                                <div className="flex-grow flex flex-col justify-between py-1"><div className="font-black text-2xl uppercase tracking-tighter">{p.name}</div>
                                <div className={`stat-box ${p.revealed?.fert || isMe || isAdmin ? 'stat-revealed' : ''}`}>
                                    <span className="stat-label">Репродукция {isAdmin && <span onClick={() => update(`players/${pIdx}/fert`, roll('fert'))} className="cursor-pointer">🎲</span>}</span>
                                    {isAdmin ? <input className="stat-input" value={p.fert} onChange={e => update(`players/${pIdx}/fert`, e.target.value)} /> : <div className={`font-black text-[13px] uppercase ${(p.revealed?.fert || isMe) && p.fert === 'БЕСПЛОДЕН' ? 'text-red-500 shadow-[0_0_10px_red]' : 'text-white'}`}>{!(isAdmin || isMe || p.revealed?.fert) ? 'Секрет' : p.fert}</div>}
                                </div>
                                {!p.uid ? (myIdx===-1 && <button onClick={() => update(`players/${pIdx}/uid`, user.uid)} className="bg-white text-black text-[10px] font-black py-2.5 rounded-xl mt-3 uppercase">Занять Место</button>) : <div className="text-[10px] uppercase font-black opacity-30 mt-3">{isMe ? 'ВАША АНКЕТА' : 'ЗАНЯТО'}</div>}</div></div>
                                {['sex', 'age', 'prof', 'health', 'bag', 'hobby', 'phob', 'f1', 'f2'].map(f => {
                                    const isRev = (f === 'sex' || f === 'age') 
                                 ? (p.revealed?.sex || p.revealed?.age || isMe || isAdmin) 
                                   : (p.revealed?.[f] || isMe || isAdmin);
    
                                    const isExp = (f === 'prof' || f === 'hobby');
                                    const expVal = f === 'prof' ? p.profExp : p.hobbyExp;

                                return (
                                 <div key={f} className={`${f==='prof'||f.includes('f')?'col-span-2':''} stat-box relative transition-all duration-500 ${p.revealed?.[f] ? 'stat-revealed' : ''}`}>
                                 {p.revealed?.[f] && (
                                     <div className="absolute top-2 right-2 flex items-center gap-1 scale-90 sm:scale-100">
                                     <span className="text-[9px] font-black text-green-400 tracking-tighter opacity-80 uppercase">Вскрыто</span>
                                     <span className="text-xs text-green-400 drop-shadow-[0_0_5px_rgba(74,222,128,0.8)]">✓</span>
                     </div>
                   )}
                         <span className="stat-label">
                            {f==='sex'?'Пол':f==='age'?'Возраст':LABELS[f]} 
                               {isAdmin && (
                               <span className="flex gap-1">
                                   <span onClick={() => update(`players/${pIdx}/${f}`, roll(f))} className="cursor-pointer">🎲</span>
                                   {isExp && <span onClick={() => update(`players/${pIdx}/${f+'Exp'}`, roll('years', p.age))} className="cursor-pointer">⏳</span>}
                              </span>
                    )}
                    </span>

                     {isAdmin ? (
                     <div className="flex gap-1">
                        <input className="stat-input" value={p[f]} onChange={e => update(`players/${pIdx}/${f}`, e.target.value)} />
                       {isExp && <input className="stat-input w-16" value={expVal} onChange={e => update(`players/${pIdx}/${f+'Exp'}`, e.target.value)} />}
                      </div>
                     ) : (
                          <div className={`font-black text-[14px] uppercase ${!isRev ? 'blur-val' : 'text-white/90'}`}>
                              {isRev ? (isExp ? `${p[f]} (${expVal} лет)` : p[f]) : 'Секрет'}
                          </div>
                    )}
                        </div>
                    );
                     })}
                                <div className="grid grid-cols-2 gap-3 mt-6 pt-6 border-t border-white/10">
                                    {p.actions && p.actions.map((c, ci) => (
                                        <div key={ci} className="bg-white/5 border border-white/10 p-4 rounded-xl min-h-[110px] flex flex-col justify-between">
                                            <p className="text-[9px] font-bold uppercase opacity-70">{isMe || isAdmin ? c : 'BUNKER'}</p>
                                            {isMe && <button onClick={() => { 
                                                playSfx(sfx.stop); // Звук сработает СРАЗУ при клике
                                                update('globalStop', {user: p.name, text: c}); 
                                                const nA = p.actions.filter((_, i) => i !== ci); 
                                                update(`players/${pIdx}/actions`, nA); 
                                                }} className="bg-white text-black text-[9px] font-black py-1.5 rounded-lg uppercase">ЮЗНУТЬ</button>}                                        </div>
                                    ))}
                                </div>
                                <div className="mt-8 pt-6 border-t border-white/10 flex flex-wrap gap-2.5 justify-center">
                                    {Array.from({ length: gameState.players.length }, (_, i) => i + 1).map(v => <div key={v} onClick={() => isAdmin && update(`players/${pIdx}/votedBy`, (p.votedBy || []).includes(v) ? p.votedBy.filter(x => x !== v) : [...(p.votedBy || []), v])} className={`v-slot ${p.votedBy?.includes(v) ? 'active' : ''}`}>{v}</div>)}
                                </div>
                                {isAdmin && <div className="mt-8 flex gap-2"><button onClick={() => { update('turnTime', 0); update('speakerId', isTalking ? null : p.id); }} className={`flex-grow py-4 rounded-2xl font-black text-xs uppercase transition-all ${isTalking ? 'bg-red-600 shadow-[0_0_20px_red]' : 'bg-white text-black'}`}>ДАТЬ СЛОВО</button>
                                <button onClick={() => update(`players/${pIdx}/isExiled`, !p.isExiled)} className="bg-red-900 border-2 border-red-500 px-4 rounded-2xl font-black text-[10px] uppercase shadow-lg shadow-red-900/40">{p.isExiled ? 'ВОСКРЕСИТЬ' : 'ИЗГНАТЬ'}</button></div>}
                            </div>
                        );
                    })}</div>
                </div>
            );
        }
        const root = ReactDOM.createRoot(document.getElementById('root')); root.render(<App />);
    </script></body></html>